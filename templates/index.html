<!DOCTYPE html>
<html>
<head>
    <title>CRUD App | FastAPI</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>

<div class="container">
    <h1>ðŸš€ User CRUD Application</h1>

    <form id="userForm">
        <input type="text" name="name" placeholder="Enter name" required>
        <input type="email" name="email" placeholder="Enter email" required>
        <button type="submit">Add User</button>
    </form>

    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>Name</th>
                <th>Email</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            {% for user in users %}
            <tr>
                <td>{{ user[0] }}</td>
                <td>{{ user[1] }}</td>
                <td>{{ user[2] }}</td>
                <td>
                    <button class="delete-btn" onclick="deleteUser({{ user[0] }})">Delete</button>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<script>
document.getElementById("userForm").addEventListener("submit", async function(e) {
    e.preventDefault();
    const formData = new FormData(this);
    await fetch("/add", { method: "POST", body: formData });
    location.reload();
});

async function deleteUser(id) {
    await fetch(`/delete/${id}`, { method: "POST" });
    location.reload();
}
</script>

</body>
</html>

